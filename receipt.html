<!-- receipt.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Receipt - Flip Phone Resale</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <script src="common.js" defer></script>
</head>
<body>
  <header>
    <div class="branding">
      <img src="images/logo.png" alt="Flip Phone Resale Logo" class="logo">
      <h1>Flip Phone Resale</h1>
    </div>
    <nav>
      <a href="index.html">Home</a>
      <a href="shop.html">Shop Now</a>
      <a href="sell.html">Sell</a>
      <a href="about.html">About</a>
      <a href="cart.html">Cart</a>
    </nav>
  </header>

  <main class="container">
    <h2>Thank You for Your Purchase!</h2>
    <p>This is your official eâ€‘receipt. Please save or print for your records.</p>

    <div id="receipt-summary" class="checkout-list"></div>
    <button onclick="window.print()" class="btn">Print Receipt</button>
    <button onclick="clearCart(); window.location.href='index.html';" class="btn">Return Home</button>
  </main>

  <footer>
    <p>&copy; 2025 Flip Phone Resale. All rights reserved.</p>
  </footer>

  <script>
    function displayReceipt() {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      const name = localStorage.getItem("customerName") || "N/A";
      const email = localStorage.getItem("customerEmail") || "N/A";
      const summary = document.getElementById("receipt-summary");

      if (cart.length === 0) {
        summary.innerHTML = "<p>No items found. Your cart was empty.</p>";
        return;
      }

      let total = 0;
      const date = new Date().toLocaleString();
      summary.innerHTML = `
        <p><strong>Name:</strong> ${name}<br>
        <strong>Email:</strong> ${email}<br>
        <strong>Date:</strong> ${date}</p>
        <ul style="list-style:none;padding:0;">
      `;

      cart.forEach(item => {
        const subtotal = item.price * item.quantity;
        summary.innerHTML += `
          <li style="margin-bottom:10px;display:flex;align-items:center;gap:10px;">
            <img src="${item.image}" alt="${item.name}" style="width:50px;height:auto;border-radius:4px;">
            <span>${item.name} (x${item.quantity}) - $${subtotal.toFixed(2)}</span>
          </li>
        `;
        total += subtotal;
      });

      summary.innerHTML += `</ul><h3>Total Paid: $${total.toFixed(2)}</h3>`;
    }

    displayReceipt();
  </script>
</body>
</html>

